{"version":3,"sources":["webpack:///./src/views/OneUser.vue","webpack:///./src/views/OneUser.vue?665f","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","src","alt","image","oneUser","imageUrl","username","isAdmin","id","userInfos","editing","name","deleteUser","icon","clique","type","ref","onFileSelected","onUpdate","mode","Publications","post","key","props","components","CreatePost","Post","data","computed","methods","this","$refs","hiddenBtn","click","event","files","target","fileReader","FileReader","addEventListener","result","readAsDataURL","URL","createObjectURL","$store","dispatch","userId","idToDelete","then","$router","push","getData","$route","body","params","mounted","state","user","watch","render","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-79eb5fd2.ecf0c372.js","sourcesContent":["<template>\r\n    <div>\r\n\r\n        <div class=\"card__profil\">\r\n            <div class=\"profil\">\r\n                <img class=\"profil__img\" v-if=\"image\" :src=\"image\"  alt=\"\">\r\n                <img  class=\"profil__img\" v-else-if=\"oneUser.imageUrl\" :src=\"oneUser.imageUrl\"  alt=\"\">\r\n                <img class=\"profil__img\" v-else src=\"../assets/Default-avatar.jpg\"  alt=\"\">\r\n\r\n                <div class=\"profil__footer\">\r\n                    <div class=\"profil__username\">{{oneUser.username}}</div>\r\n                    <div class=\"profil__isAdmin\" v-if=\"oneUser.isAdmin == true\">MODERATEUR</div>\r\n                    <div class=\"profil__update\" v-if=\"oneUser.id === userInfos.id || userInfos.isAdmin\" @click=\"editing = !editing\">...</div>\r\n                    \r\n\r\n                    <transition name=\"slidin\">\r\n                        <div class=\"profil__edit\" v-if=\"editing\">\r\n                            <button class=\"deleteBtn\" @click=\"deleteUser\"><font-awesome-icon icon=\"trash-alt\" /></button>\r\n                            <div class=\"whitespace\"></div>\r\n                            <button class=\"modifyImgBtn\" @click=\"clique\" v-if=\"oneUser.id === userInfos.id\"><font-awesome-icon icon=\"images\" /></button>\r\n                            <input type=\"file\" class=\"hiddenBtn\" ref=\"hiddenBtn\" @change=\"onFileSelected\">\r\n                            <button class=\"modifyBtn\" @click=\"onUpdate\" v-if=\"oneUser.id === userInfos.id\"><font-awesome-icon icon=\"check\" /></button>\r\n                        </div>\r\n                    </transition>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"card card__PublicationsTitle\">  \r\n            <h1>Publications</h1>\r\n        </div>\r\n        \r\n        <CreatePost v-if=\"oneUser.id === userInfos.id\"/>\r\n\r\n        <transition-group name=\"slide\" mode=\"out-in\">\r\n\r\n            <Post class=\"slide-item\" v-for=\"post in oneUser.Publications\" :key=\"post.id\" :post=\"post\"/>\r\n\r\n        </transition-group>\r\n    \r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Post from '../components/Post.vue'\r\nimport CreatePost from '../components/CreatePost.vue'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n    name: 'OneUser',\r\n    props: ['userId'],\r\n    components: { CreatePost, Post },\r\n    data () {\r\n        return {\r\n            editing: false,\r\n            image: null,\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['oneUser', 'userInfos'])\r\n    },\r\n    methods: {\r\n        clique() {\r\n                this.$refs.hiddenBtn.click()\r\n        },\r\n        onFileSelected(event) {\r\n            this.files = event.target.files[0];\r\n            const files = event.target.files;\r\n            const fileReader = new FileReader();\r\n            fileReader.addEventListener(\"load\", () => {\r\n                this.imageUrl = fileReader.result;\r\n            });\r\n            fileReader.readAsDataURL(files[0]);\r\n            this.image = URL.createObjectURL(files[0]);\r\n        },\r\n        onUpdate() {\r\n            this.$store.dispatch(\"updateUser\", {\r\n                userId : this.userInfos.id,\r\n                image : this.files\r\n            })\r\n            this.editing = false\r\n            this.image = null\r\n        },\r\n        deleteUser() {\r\n            this.$store.dispatch(\"deleteUser\", {\r\n                id : this.userInfos.id,\r\n                isAdmin : this.userInfos.isAdmin,\r\n                idToDelete : this.oneUser.id\r\n            })\r\n            .then(() => {\r\n                if (!this.userInfos.isAdmin) {\r\n                    this.$router.push('/')\r\n                }else if (this.oneUser.id == this.userInfos.id){\r\n                    this.$router.push('/')\r\n                }else if (this.userInfos.isAdmin){\r\n                    this.$router.push('/timeline')\r\n                }\r\n            })\r\n        },\r\n        getData() {\r\n            if (this.$route.name !== 'OneUser') {\r\n            return\r\n            }else{\r\n            const body = { id: this.$route.params.userId }\r\n            this.$store.dispatch('getOneUser', body)\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        if (this.$store.state.user.userId == -1) {\r\n            this.$router.push('/')\r\n            return\r\n        }\r\n        const body = { id: this.userId }\r\n        this.$store.dispatch('getUserInfos')\r\n        this.$store.dispatch('getOneUser', body)\r\n    },\r\n    watch: {\r\n            '$route' : 'getData',\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./OneUser.vue?vue&type=template&id=a162c688\"\nimport script from \"./OneUser.vue?vue&type=script&lang=js\"\nexport * from \"./OneUser.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}